# 客户标签体系 & 营销自动化模块 — 三端详细设计规范

**版本：** 1.0 | **日期：** 2026-02-19
**覆盖端：** 客户端（H5/小程序）· 业务员端（App）· 平台运营端（Admin）
**设计原则：** 标签 = 精准触达的语言；营销 = 有温度的主动关怀，不是打扰

---

## 系统架构概览

```
┌─────────────────────────────────────────────────────────────┐
│                      标签数据流向                            │
│                                                             │
│  数据来源                标签引擎              营销使用       │
│  ────────              ──────────            ──────────     │
│  行为数据（浏览/积分）                                        │
│  测评结果（5维雷达图）  → 系统自动标签  →    营销策略引擎     │
│  保单数据（到期/续保）    业务员手动标签       业务员工作台     │
│  个人信息（生日/节点）  ↗              →     客户端个性化     │
│  业务员录入                                                  │
└─────────────────────────────────────────────────────────────┘
```

---

## 第一部分：客户标签体系

### 1.1 标签分类总表

标签分两大来源：**系统自动标签**（后台计算）和**业务员手动标签**（人工判断）。

#### 系统自动标签（6个维度）

**维度1：活跃度标签** `tag_category: ACTIVITY`

| 标签名 | 标签Key | 触发条件 | 营销可用 |
|--------|---------|---------|---------|
| 高频活跃 | ACTIVE_HIGH | 近30天登录 ≥ 15次 | ✅ |
| 低频活跃 | ACTIVE_LOW | 近30天登录 3-14次 | ✅ |
| 沉睡用户 | DORMANT | 近30天0次登录，历史有登录记录 | ✅ |
| 即将流失 | CHURN_RISK | 连续60天未登录 | ✅ |
| 新激活 | NEWLY_ACTIVATED | 注册后7天内完成首次登录+基本信息填写 | ✅ |

**维度2：购买意向标签** `tag_category: INTENT`

| 标签名 | 标签Key | 触发条件 | 营销可用 |
|--------|---------|---------|---------|
| 高意向 | INTENT_HIGH | 近14天浏览产品页 ≥ 3次，或发起计划书/询价 | ✅ |
| 中意向 | INTENT_MEDIUM | 近30天浏览产品页1-2次，或阅读科普 ≥ 5篇 | ✅ |
| 低意向 | INTENT_LOW | 有登录但从未浏览产品页 | ✅ |
| 比价中 | COMPARING | 同险种 ≥ 3款产品浏览（7天内） | ✅ |
| 询价中 | INQUIRING | 发起过在线咨询或询价动作 | ✅ |

**维度3：保障状况标签** `tag_category: COVERAGE`

| 标签名 | 标签Key | 触发条件 | 营销可用 |
|--------|---------|---------|---------|
| 保障缺口大 | COVERAGE_GAP_HIGH | 测评综合得分 < 40分 | ✅ |
| 保障缺口中 | COVERAGE_GAP_MEDIUM | 测评综合得分 40-69分 | ✅ |
| 保障完善 | COVERAGE_FULL | 测评综合得分 ≥ 70分 | ✅ |
| 未做测评 | NO_ASSESSMENT | 注册7天后仍未完成测评 | ✅ |
| 医疗缺口 | GAP_MEDICAL | 医疗维度得分 < 40 | ✅ |
| 重疾缺口 | GAP_CRITICAL | 重疾维度得分 < 40 | ✅ |
| 寿险缺口 | GAP_LIFE | 寿险维度得分 < 40 | ✅ |
| 养老缺口 | GAP_ANNUITY | 养老维度得分 < 40 | ✅ |

**维度4：生命周期/人生节点标签** `tag_category: LIFECYCLE`

| 标签名 | 标签Key | 触发条件 | 有效期 | 营销可用 |
|--------|---------|---------|-------|---------|
| 生日月 | BIRTHDAY_MONTH | 当前月 = 生日月 | 当月 | ✅ |
| 生日周 | BIRTHDAY_WEEK | 距生日 ≤ 7天 | 生日次日移除 | ✅ |
| 新婚 | NEWLY_MARRIED | 婚姻状态变更为「已婚」后90天内 | 90天 | ✅ |
| 新生儿家庭 | NEW_PARENT | 家庭成员新增18岁以下子女后180天内 | 180天 | ✅ |
| 临近退休 | PRE_RETIREMENT | 年龄55-60岁 | 动态 | ✅ |
| 已退休 | RETIRED | 年龄 ≥ 60岁 | 动态 | ⚠️ 限制推送投资型产品 |

**维度5：保单状态标签** `tag_category: POLICY_STATUS`

| 标签名 | 标签Key | 触发条件 | 营销可用 |
|--------|---------|---------|---------|
| 续保提醒 | RENEWAL_DUE | 最近保单到期日 ≤ 60天 | ✅ |
| 续保紧急 | RENEWAL_URGENT | 最近保单到期日 ≤ 15天 | ✅（豁免频控） |
| 保单周年 | POLICY_ANNIVERSARY | 保单生效日满周年前7天 | ✅ |
| 已断保 | POLICY_LAPSED | 保单已到期且未续保，距到期日 ≤ 90天 | ✅（首次豁免频控） |
| 理赔中 | CLAIM_IN_PROGRESS | 有进行中的理赔申请 | ❌ 暂停所有营销 |

**维度6：积分与参与度标签** `tag_category: ENGAGEMENT`

| 标签名 | 标签Key | 触发条件 | 营销可用 |
|--------|---------|---------|---------|
| 积分即将过期 | POINTS_EXPIRING | 30天内到期积分 ≥ 500分 | ✅ |
| 积分低余额 | POINTS_LOW | 总积分余额 < 100分 | ✅ |
| 连续打卡7天 | STREAK_7 | 已连续每日打卡 ≥ 7天 | ✅ |
| 积分高等级 | POINTS_LEVEL_HIGH | 积分等级为钻石/守护家 | ✅ |
| 活动参与者 | EVENT_PARTICIPANT | 近90天参与过 ≥ 1次平台活动 | ✅ |
| 推荐达人 | REFERRER | 成功转介绍新用户注册 ≥ 3人 | ✅ |

---

#### 业务员手动标签 `tag_category: MANUAL`

**平台预设标签库（运营维护，业务员可直接选用）：**

| 标签名 | 说明 |
|--------|------|
| 转介绍来源 | 由其他客户推荐 |
| 家族客户 | 同一家庭已有多单 |
| 优质案例 | 可作为成功案例（需客户同意） |
| 决策者 | 家庭保险决策主导人 |
| 需陪同决策 | 需配偶或家人共同决定 |
| 价格敏感 | 对保费高度关注 |
| 健康告知风险 | 存在健康告知需注意事项 |
| 高净值 | 年收入50万以上（业务员判断） |
| 企业主 | 有企业经营相关保障需求 |
| 已有竞品保单 | 持有其他公司保单 |

**自定义标签规则：**
- 长度限制：2-10个汉字或字符
- 自定义标签经平台审核（敏感词过滤+人工复核）后方可使用
- 审核通过后归属该业务员账号，不跨业务员共享
- 违规标签平台可强制删除并警告业务员账号

---

### 1.2 标签打标逻辑规则

#### 计算方式

| 计算类型 | 说明 | 适用标签 |
|---------|------|---------|
| 批量计算（每日凌晨02:00） | 全量跑一次 | 活跃度类、保单状态类 |
| 实时事件触发（15分钟内） | 行为发生后即时计算 | 意向类、测评完成类、积分类 |

#### 关键标签打标/移除规则

**活跃度互斥规则：**
- ACTIVE_HIGH / ACTIVE_LOW / DORMANT / CHURN_RISK 四选一
- DORMANT持续60天自动升级为CHURN_RISK（移除DORMANT，打上CHURN_RISK）
- 任意一次登录 → 15分钟内移除DORMANT/CHURN_RISK，打上对应活跃标签

**意向标签有效期：**
- INTENT_HIGH：14天内无新触发行为自动降级为INTENT_MEDIUM
- COMPARING：7天后自动移除，或完成购买后即时移除

**保障状况标签：**
- 测评提交后5分钟内打标，覆盖旧标签（每次测评重新计算）

**生命周期标签：**
- BIRTHDAY_WEEK：生日次日自动移除
- NEW_PARENT：180天后自动移除
- NEWLY_MARRIED：90天后自动移除

#### 标签互斥优先级

| 互斥组 | 规则 |
|--------|------|
| 活跃度组 | ACTIVE_HIGH > ACTIVE_LOW > DORMANT > CHURN_RISK，高优先覆盖 |
| 意向组 | INTENT_HIGH > INTENT_MEDIUM > INTENT_LOW，高优先覆盖 |
| 保障综合 | COVERAGE_GAP_HIGH / COVERAGE_GAP_MEDIUM / COVERAGE_FULL 三选一 |
| 续保组 | RENEWAL_URGENT 优先级高于 RENEWAL_DUE |

#### 标签变更日志（数据库设计）

所有标签变更记录至 `tag_change_log`：

| 字段 | 类型 | 说明 |
|------|------|------|
| customer_id | UUID | 客户ID |
| tag_key | string | 标签Key |
| action | enum | ADD / REMOVE / UPDATE |
| trigger_type | enum | BATCH_JOB / REALTIME_EVENT / MANUAL |
| trigger_event | string | 触发事件描述 |
| operator_id | UUID | 手动操作时的业务员ID |
| created_at | timestamp | 变更时间 |

---

### 1.3 三端交互设计

#### 客户端 — 标签隐私边界

客户端不直接展示「标签」概念，将有价值的标签转化为**友好的状态提示**：

| 系统标签 | 客户端展示形式 | 展示位置 |
|---------|-------------|---------|
| BIRTHDAY_WEEK | `本周是您的生日，专属礼遇已为您准备好` | 首页 Banner |
| POLICY_ANNIVERSARY | `您的XX保单已陪伴您N年，感谢信赖` | 消息中心 |
| RENEWAL_DUE | `您有1张保单将于XX天后到期，点击续保` | 首页提醒卡 |
| RENEWAL_URGENT | `紧急提醒：保单即将在XX天内到期` | 首页置顶 |
| POINTS_EXPIRING | `您有XXX积分将于XX天后过期，快去使用` | 积分页面 |
| GAP_MEDICAL | `您的医疗保障有待加强，查看建议` | 测评结果页 |

**客户绝对不可见：** INTENT_HIGH / DORMANT / CHURN_RISK / COMPARING / 全部手动标签

---

#### 业务员端 — 标签管理

**客户详情页标签区（最多展示6个，超出折叠）**

**标签展示优先级：**
1. 保单状态类（RENEWAL_URGENT > RENEWAL_DUE > POLICY_ANNIVERSARY）
2. 意向类（INTENT_HIGH > COMPARING）
3. 活跃度类（DORMANT > CHURN_RISK）
4. 保障缺口类
5. 生命周期类
6. 业务员手动标签

**标签视觉区分：**

| 标签类型 | 背景色 | 左侧图标 |
|---------|-------|---------|
| 系统自动标签 | 蓝色系 | 「系」小图标 |
| 业务员手动标签 | 橙色系 | 「我」小图标 |
| 营销策略生效中 | 绿色系 | 「策」小图标 + `策略中` |
| 手动标签-待审核 | 灰色 | 「审」小图标 + `待审` |

**添加手动标签流程：**
```
点击「+」→ 标签选择面板
  ├── 常用标签（预设库前10）
  ├── 搜索标签（全部预设库）
  └── 自定义输入 → [创建] → 进入「待审核」状态
```

**批量打标（客户列表页）：**
- 多选客户（最多50个）→ 顶部操作栏「批量打标」
- 确认弹窗：`将为 XX 位客户添加标签：[标签名]`

**标签筛选客户列表：**
- 系统标签：按维度分组，组内「或」，组间「且」
- 手动标签：从本人标签库多选
- 组合逻辑：系统标签条件 AND 手动标签条件

---

#### 平台运营端 — 标签管理

**标签库管理（「客户管理」→「标签库管理」）**

三个 Tab：

**Tab 1：系统标签** — 只读展示

| 字段 | 说明 |
|------|------|
| 标签Key | 如 DORMANT |
| 标签名 | 沉睡用户 |
| 维度分类 | 活跃度 |
| 当前覆盖人数 | 实时 |
| 营销可用状态 | ✅ / ❌ / ⚠️（限制） |

**Tab 2：预设标签库** — 运营可增删改

**Tab 3：自定义标签审核**

| 字段 | 说明 |
|------|------|
| 提交人 | 业务员姓名+工号 |
| 标签内容 | 待审核的标签文字 |
| 提交时间 | — |
| 操作 | [通过] [驳回（填原因）] |

- 审核 SLA：工作日 24 小时内
- 审核结果通知业务员（App 内通知）

**标签分析看板（运营侧）：**

| 分析维度 | 说明 |
|---------|------|
| 各系统标签覆盖率 | 如「沉睡用户 3,420人，占总客户 18.5%」 |
| 标签趋势图 | 近30天关键标签覆盖人数折线图 |
| 标签转化效果 | INTENT_HIGH客户30天投保转化率 vs 全体 |
| 手动标签使用排名 | 哪些预设手动标签使用频率最高 |

---

## 第二部分：营销自动化模块

### 2.1 触发条件类型

营销策略触发条件分4大类，支持 AND/OR 组合：

| 触发类型 | 子类 | 示例 |
|---------|------|------|
| **时间触发** | 固定日期 / 相对日期 / 周期 / 生日偏移 / 注册周年 | 保单到期日前30天；每月1日 |
| **事件触发** | 首次行为 / 行为达成 / 状态变更 / 购买完成 / 理赔完成 | 首次完成测评；连续打卡第7天 |
| **标签触发** | 标签新增 / 标签组合 / 标签移除 / 标签持续N天 | DORMANT持续15天；INTENT_HIGH + GAP_MEDICAL 同时存在 |
| **行为触发** | 页面浏览次数 / 搜索关键词 / 积分行为 / 阅读时长 | 重疾险产品页浏览 ≥ 2次（7天内） |

---

### 2.2 营销动作类型

#### 面向客户的动作

**动作1：发送消息推送（Push Notification）**

| 参数字段 | 说明 |
|---------|------|
| push_title | 消息标题，最多20字 |
| push_content | 消息内容，最多60字，支持动态变量 |
| push_channel | APP推送 / 站内信 / 短信（可多选） |
| deep_link | 点击后跳转页面路径 |
| send_time_type | 立即 / 指定时间 / 智能时段（系统选客户活跃时段） |

**动态变量支持：** `{customer_name}` `{policy_name}` `{expire_days}` `{points_amount}` `{birthday_date}`

**动作2：发放积分（Grant Points）**

| 参数字段 | 说明 |
|---------|------|
| points_amount | 发放积分数，1-5,000 |
| points_expire_days | 积分有效期（天），0=永不过期 |
| points_remark | 积分来源说明，显示在积分明细，如「生日礼遇积分」 |
| notify_customer | 是否同时推送积分到账通知 |

**动作3：推送活动邀请（Event Invitation）**

| 参数字段 | 说明 |
|---------|------|
| event_id | 关联的平台活动ID |
| invitation_message | 邀请文案，最多100字 |
| show_deadline | 是否展示活动截止时间 |

**动作4：推送内容（Content Push）**

| 参数字段 | 说明 |
|---------|------|
| content_id | 关联内容ID（文章/视频/测评） |
| content_tag | 按标签动态推送匹配内容（如GAP_MEDICAL相关内容） |
| push_message | 推送文案，最多60字 |

**动作5：展示首页Banner**

| 参数字段 | 说明 |
|---------|------|
| banner_image_url | Banner图片链接 |
| banner_title | Banner标题 |
| banner_link | 点击跳转链接 |
| display_duration_days | 展示天数 |
| display_position | 轮播第1位 / 第2位 / 固定浮层 |

#### 面向业务员的动作

**动作6：触发业务员信号（Agent Signal）**

| 参数字段 | 说明 |
|---------|------|
| signal_type | 枚举：高意向 / 续保 / 人生节点 / 新激活 / **营销触达（新增）** |
| signal_title | 信号卡标题，最多20字 |
| signal_content | 信号卡内容，最多80字，支持动态变量 |
| signal_priority | 高 / 中 / 低 |
| action_suggestion | 建议业务员采取的行动 |
| expire_hours | 信号有效期（小时），1-720 |

**动作7：发送业务员App内通知**

| 参数字段 | 说明 |
|---------|------|
| notify_title | 通知标题，最多20字 |
| notify_content | 通知内容，最多100字 |
| related_customer_id | 关联客户ID（点击跳转客户详情） |

**动作8：创建客户跟进任务**

| 参数字段 | 说明 |
|---------|------|
| task_title | 任务标题，如「联系李华进行生日关怀」 |
| task_due_date_offset | 相对触发时间的截止日期偏移（天） |
| task_priority | 高 / 中 / 低 |
| task_notes | 任务备注，可包含建议话术 |

---

### 2.3 十个典型营销策略模板

---

**策略1：生日暖心关怀**

- 触发条件：客户生日前7天（时间触发：相对生日日期 -7天）
- 目标标签：BIRTHDAY_WEEK
- 频率限制：每客户每年1次

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 生日前7天 | 业务员信号 | 类型：人生节点；「{name}的生日快到啦」；建议：发送祝福并附定制计划书 |
| 2 | 生日当天09:00 | 发积分 + 推送 | 积分188分，备注「生日礼遇」；推送：「生日快乐！专属礼遇已到账」 |
| 3 | 生日后3天 | 推送内容 | 「生日后最值得做的3件保障规划」 |

文案示例：`{name}，祝您生日快乐！平台为您送上188积分，以及一份专属保障建议，愿您和家人平安健康`

---

**策略2：沉睡客户唤醒**

- 触发条件：DORMANT标签持续15天（标签持续触发）
- 目标标签：DORMANT（持续15天，不超过60天）
- 频率限制：每客户每90天最多1次

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 触发即时 | 业务员信号 | 类型：营销触达；「{name}已15天未登录」；优先级：低；建议：发送科普文章低压触达 |
| 2 | 次日10:00 | 推送 | 标题「好久不见！」；内容「为您准备了最新保险科普，还有50积分等您来领」 |
| 3 | 第3天 | 发积分 | 50分，备注「回归奖励」，有效期30天 |

文案示例：`好久不见！您的保障计划还在等您，我们更新了3篇最新资讯，以及50积分回归奖励，快来领取吧`

---

**策略3：保单周年感恩回馈**

- 触发条件：保单生效日满周年前7天
- 目标标签：POLICY_ANNIVERSARY
- 频率限制：每张保单每年1次

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 周年前7天 | 业务员信号 | 「{policy_name}即将迎来{N}周年」；建议进行保障复盘，评估加保机会 |
| 2 | 周年纪念日 | 发积分 + 推送 | 积分 N×100分（上限500）；「守护N年了，感谢信任」 |
| 3 | 周年后2天 | 推送内容 | 「持有保单X年，这些权益你一定要知道」 |

文案示例：`您好！重疾险保单已陪伴您整整3年了，特别赠送300积分，您的顾问为您准备了3年保障复盘报告`

---

**策略4：积分即将过期提醒**

- 触发条件：POINTS_EXPIRING标签新增时
- 目标标签：POINTS_EXPIRING（30天内到期 ≥ 500分）
- 频率限制：每次积分过期事件1次

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 触发即时 | 推送 | 「您有{N}积分即将过期」；渠道：APP推送+站内信 |
| 2 | 过期前7天（若未使用） | 推送 | 「积分还剩7天到期，再不用就没了！」 |

文案示例：`您有680积分将于2026年3月1日到期，可兑换保险优惠券或体检套餐，赶快使用！`

---

**策略5：保障缺口定向转化**

- 触发条件：GAP_MEDICAL 且 INTENT_MEDIUM/HIGH 同时存在（标签组合触发）
- 频率限制：每客户每60天最多1次

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 触发即时 | 业务员信号（高优先） | 「{name}医疗缺口大+有购买意向」；建议立即联系推百万医疗险计划书；有效期48h |
| 2 | 次日10:00 | 推送内容 | 推送医疗险相关科普；文案「测评显示您的医疗保障可以更完善，为您挑选3款热门医疗险」 |
| 3 | 第3天（若无购买） | 推送 | 「专属顾问为您准备了医疗保障方案，7天内享专属优惠」 |

---

**策略6：续保紧急触达**

- 触发条件：RENEWAL_URGENT标签新增时（保单剩余 ≤ 15天）
- 频率限制：每张保单到期事件1次，**豁免月度频控**

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 触发即时 | 业务员信号（最高优先） + 推送 | 信号：「紧急！{name}的{policy}还有{N}天到期」；推送渠道：APP+**短信** |
| 2 | 到期前3天（若仍未续保） | 推送 | 「最后提醒：保单还有3天到期，断保后重新投保面临健康告知风险」 |

文案示例：`保障不能断！您的重疾险将于2026-03-01到期，续保可保障持续有效，点击一键续保`

---

**策略7：新客7天激活旅程**

- 触发条件：NEWLY_ACTIVATED标签新增时
- 频率限制：每客户仅触发1次（一次性旅程）

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 注册立即 | 业务员信号 | 「新客{name}已激活」；建议24h内发欢迎消息，引导完成测评 |
| 2 | 注册后1小时 | 推送 | 「先做个保障测评，完成可获200积分新手礼包」 |
| 3 | 第3天（未测评） | 推送 | 「测评还没完成，专属建议等您领取」 |
| 4 | 首次测评完成后 | 发积分 | 200分，备注「新手测评礼包」，有效期90天 |

---

**策略8：高净值客户专属关怀**

- 触发条件：手动标签「高净值」新增，且同时持有 INTENT_MEDIUM 或以上
- 频率限制：每客户每90天1次

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 触发即时 | 业务员信号（高优先） | 「VIP客户{name}有购买意向」；建议安排专属咨询，推高端医疗/年金综合方案 |
| 2 | 次日 | 业务员App内通知 | 「提醒：{name}的跟进任务已创建，建议今日内联系」 |
| 3 | 第2天 | 创建跟进任务 | 任务「联系{name}提供专属保障咨询」；截止3天后；优先级：高 |

---

**策略9：新婚家庭保障唤醒**

- 触发条件：NEWLY_MARRIED标签新增，且有保障缺口（COVERAGE_GAP_HIGH 或 MEDIUM）
- 频率限制：每客户仅触发1次（人生节点一次性策略）

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 触发即时 | 业务员信号 | 「{name}刚结婚，家庭保障需求升级」；建议推「新婚家庭保障指南」，邀请夫妻共同测评 |
| 2 | 第2天 | 推送内容 | 「恭喜迈入人生新阶段！查看新婚家庭保障指南」 |
| 3 | 第7天 | 首页Banner | 「为您和家人建立完整保障体系」；展示14天 |

---

**策略10：打卡里程碑奖励**

- 触发条件：STREAK_7标签新增时（连续打卡刚好达到7天）
- 频率限制：7天周期内1次，可重复触发

| 步骤 | 触发时间 | 动作 | 详情 |
|------|---------|------|------|
| 1 | 触发即时 | 发积分 + 推送 | 积分70分，备注「7天连续打卡奖励」；「坚持7天！获得70积分，继续到30天得500积分大礼包」 |
| 2 | 第1天 | 推送内容 | 「坚持打卡的人，保险意识更强」科普内容 |

---

### 2.4 频控与合规规则

#### 全局频控上限（每客户）

| 渠道 | 每日上限 | 每周上限 | 每月上限 |
|------|---------|---------|---------|
| APP推送 | 2条 | 8条 | 20条 |
| 站内信 | 3条 | 12条 | 30条 |
| 短信 | 1条 | 3条 | 8条 |
| 业务员信号（同客户） | — | — | 10条 |

**频控豁免（不计入月度上限）：**
- RENEWAL_URGENT（续保紧急）：每张保单触发1次豁免
- POLICY_LAPSED（断保首次通知）：首次豁免
- 系统服务通知（理赔进度/账户安全）：完全豁免

**优先级抢占（同日多策略触发时）：**

| 优先级 | 策略类型 |
|-------|---------|
| P1（最高） | 续保紧急、断保通知 |
| P2 | 生命节点（生日、婚育）、高意向转化 |
| P3 | 周年感恩、积分过期 |
| P4 | 沉睡激活、内容推送、活动邀请 |

同日多条策略：仅发送最高优先级1-2条，其余延迟24小时或取消。

**静默期：**
- 发送时间窗口：09:00 — 21:00（短信限09:00-20:00）
- 理赔期间（CLAIM_IN_PROGRESS标签）：暂停所有营销类推送，仅保留服务通知

#### 内容审核要求

| 内容类型 | 审核原因 | SLA |
|---------|---------|-----|
| 涉及具体产品名称的文案 | 防夸大宣传 | 2个工作日 |
| 含收益率/赔付率数字 | 防虚假承诺 | 1个工作日 |
| 新增自定义推送模板 | 合规审查 | 1个工作日 |
| 含「保证」「必赔」等词 | 自动拦截+人工复核 | 4小时 |

**自动拦截禁用词：** 保证赔付、100%赔付、绝对安全、保底收益X%、医保代替、全额报销、买了不用担心

#### 保险监管相关禁止行为（系统层面硬拦截）

1. **30天内同一客户保险购买邀约不超过3次**
2. **65岁以上客户不自动推送投资型保险**（年金险/投连险需业务员人工确认）
3. **禁止虚构紧迫感**（如「仅剩3个名额」「12:00截止」等虚假信息）
4. **退出机制**：每条推送必须有一键退订入口，退订后72小时内停止同类推送
5. **禁止在推送中引导通过个人转账/私人微信完成支付**

---

### 2.5 平台运营端配置界面

#### 策略配置关键字段

| 字段 | Key | 类型 | 必填 | 说明 |
|------|-----|------|------|------|
| 策略名称 | strategy_name | 文本 | ✅ | 内部命名，最多30字 |
| 策略分类 | strategy_category | 枚举 | ✅ | 生命节点 / 活跃促进 / 续保提醒 / 保障转化 / 积分运营 / 其他 |
| 触发条件 | trigger_config | 结构化JSON | ✅ | 可视化条件构建器（类型+参数+AND/OR逻辑） |
| 目标人群 | audience_filter | 结构化JSON | ✅ | 多标签组合筛选 |
| 执行动作序列 | action_sequence | 数组 | ✅ | 按时序排列，每个动作含类型+参数+延迟时间 |
| 频控设置 | frequency_config | 结构化 | ✅ | 每客户最大触发次数+触发间隔（天） |
| 有效期 | effective_period | 日期范围 | ✅ | 策略生效时间段 |
| A/B测试开关 | ab_test_enabled | 布尔 | — | 是否启用A/B测试 |
| 负责人 | owner_id | 用户ID | ✅ | 策略负责运营 |

#### 策略状态机

```
草稿（DRAFT）
  ↓ 提交审核
待审核（PENDING_REVIEW）  ← 审核人不得是创建人（四眼原则）
  ↓ 审核通过       ↓ 审核驳回
测试中（TESTING）   草稿（DRAFT，含驳回原因）
  ↓ 最多500人测试，确认上线
运行中（RUNNING）
  ↓ 手动暂停     ↓ 有效期结束
暂停（PAUSED）    已结束（ENDED）
  ↓ 重新启动           ↓ 复制为新草稿
运行中（RUNNING）
  ↓ 手动归档
归档（ARCHIVED）
```

| 状态 | 可执行操作 |
|------|----------|
| DRAFT | 编辑、提交审核、删除 |
| PENDING_REVIEW | 撤回审核（退回草稿） |
| TESTING | 查看测试数据、确认上线、退回草稿 |
| RUNNING | 暂停、查看数据（不可直接编辑） |
| PAUSED | 重新启动、归档 |
| ENDED | 复制为新草稿、归档 |
| ARCHIVED | 查看历史数据、复制为新草稿 |

**规则：** RUNNING状态不可直接编辑，需先暂停；任何状态变更记录操作日志（操作人+时间+原因）。

#### A/B测试设计

**支持测试维度：**
- 文案内容（同一动作，不同文案版本）
- 触发时机（如生日前7天 vs 生日前3天）
- 动作类型（如发积分100分 vs 发优惠券）

**A/B测试关键配置：**

| 字段 | 说明 |
|------|------|
| ab_group_split | 流量分配，如 A:B = 50:50 或 A:B:Control = 40:40:20 |
| ab_success_metric | 评估指标：点击率 / 转化率 / 积分使用率 / 续保率 |
| ab_min_sample_size | 最小样本量，达到后才统计显著性，默认1000人/组 |
| ab_confidence_level | 置信度，默认95% |
| ab_auto_winner | 达到置信度后是否自动推全量，默认**关闭**（需人工确认） |

---

### 2.6 业务员端展现

#### 营销触达信号（第5类信号卡）

在现有工作台4类信号卡基础上，新增「营销触达」类信号，视觉明确区分：

| 维度 | 人工/行为信号 | 营销策略触达信号 |
|------|-------------|----------------|
| 左侧色条 | 红/橙/绿/蓝 | **青绿色（Teal）** |
| 来源标注 | 「系统检测」 | 「策略触达」徽章 |
| 标题格式 | 「{name}最近多次浏览重疾险」 | 「[营销] {name}已收到「医疗缺口引导」推送」 |
| 操作建议 | 个性化建议 | 「已触达内容：{推送摘要}，建议跟进确认客户是否有疑问」 |

**营销触达信号卡示例：**

```
┌──────────────────────────────────────────────────────┐
│ ▌[策略触达]  李华已收到「医疗缺口精准引导」推送         │
│                                                      │
│  触达时间：10:32  客户状态：已打开推送（2分钟前）       │
│  推送内容：「测评显示您的医疗保障可以更完善...」        │
│                                                      │
│  建议：客户刚打开推送，现在是最佳跟进时机              │
│                                                      │
│  [查看客户]  [生成计划书]  [标记已跟进]               │
└──────────────────────────────────────────────────────┘
```

**信号筛选器新增「营销触达」选项**，业务员可单独查看由营销策略产生的信号。

#### 客户详情页 — 触达记录

「跟进记录」Tab 下新增「系统触达记录」子Tab：

| 字段 | 说明 |
|------|------|
| 触达时间 | 精确到分钟 |
| 策略名称 | 如「医疗缺口精准引导」 |
| 触达渠道 | APP推送 / 站内信 / 短信 / 业务员信号 |
| 触达内容摘要 | 推送标题前30字 |
| 触达结果 | 已送达 / 已打开 / 未打开 / 已转化 |
| 触发原因 | 友好描述，如「客户医疗保障缺口大且近期有浏览行为」 |

#### 业务员对营销策略的干预权限

1. **屏蔽特定客户营销推送**：在客户详情页设置「屏蔽营销推送」，填写原因（如「客户已明确拒绝」），屏蔽30天后自动解除（可手动续期）。

2. **标记信号已处理**：营销触达信号可标记「已跟进」「客户无意向」「转化成功」，反馈数据用于优化策略效果。

3. **请求为客户加入指定策略**：业务员申请，运营审核后执行（防滥用）。

---

## 第三部分：系统设计规范

### 3.1 数据模型（关键表）

**客户标签表 `customer_tags`**

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| customer_id | UUID | 客户ID |
| tag_key | string | 标签Key |
| tag_category | enum | ACTIVITY / INTENT / COVERAGE / LIFECYCLE / POLICY_STATUS / ENGAGEMENT / MANUAL |
| source | enum | SYSTEM / MANUAL |
| operator_id | UUID | 手动打标的业务员ID（MANUAL类型） |
| expire_at | timestamp | 标签过期时间（null=永久有效直到被移除） |
| created_at | timestamp | 打标时间 |

**营销策略表 `marketing_strategies`**

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| strategy_name | string | 策略名称 |
| strategy_category | enum | 策略分类 |
| trigger_config | JSONB | 触发条件配置 |
| audience_filter | JSONB | 目标人群筛选条件 |
| action_sequence | JSONB | 动作序列数组 |
| frequency_config | JSONB | 频控配置 |
| status | enum | DRAFT / PENDING_REVIEW / TESTING / RUNNING / PAUSED / ENDED / ARCHIVED |
| ab_test_config | JSONB | A/B测试配置（nullable） |
| effective_start | timestamp | 生效开始时间 |
| effective_end | timestamp | 生效结束时间 |
| owner_id | UUID | 负责人 |
| created_at | timestamp | 创建时间 |

**营销触达记录表 `marketing_touch_logs`**

| 字段 | 类型 | 说明 |
|------|------|------|
| id | UUID | 主键 |
| strategy_id | UUID | 关联策略ID |
| customer_id | UUID | 客户ID |
| action_type | enum | PUSH / POINTS / SIGNAL / TASK / BANNER / CONTENT |
| channel | enum | APP_PUSH / IN_APP / SMS / AGENT_SIGNAL |
| status | enum | SENT / DELIVERED / OPENED / CONVERTED / FAILED |
| trigger_reason | string | 友好触发原因描述 |
| ab_group | string | A/B测试分组（A/B/Control，nullable） |
| created_at | timestamp | 触达时间 |
| opened_at | timestamp | 打开时间（nullable） |
| converted_at | timestamp | 转化时间（nullable） |

### 3.2 合规技术实现

- **退出机制**：所有营销推送底部固定展示「退订此类消息」入口，退订后写入 `customer_marketing_opt_out` 表，72小时内系统停止同类推送
- **65岁以上硬拦截**：策略引擎发送前检查客户年龄，PRE_RETIREMENT / RETIRED标签客户过滤投资型保险相关动作
- **频控实现**：Redis计数器（key: `mkt:freq:{customer_id}:{channel}:{day/week/month}`），原子操作保证并发安全
- **理赔期暂停**：CLAIM_IN_PROGRESS标签存在时，所有营销类动作跳过执行，仅执行服务类通知

---

*本文档配合以下规范使用：*
- *[客户端UI/UX规范](./customer-h5-ux-spec.md)*
- *[业务员端UI/UX规范](./agent-app-ux-spec.md)*
- *[平台运营端UI/UX规范](./platform-admin-ux-spec.md)*
- *[积分与活动体系三端设计](./points-activity-system-spec.md)*
- *[brainstorm：积分体系与客户粘性](../product/brainstorm-积分体系与客户粘性.md)*
